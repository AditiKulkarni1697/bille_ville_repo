<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp"
      crossorigin="anonymous"
    />
  </head>
  <style>
    body {
        width: 95vw;
        margin: auto;
      }
      header,
      main,
      footer {
        margin-top: 28px;
      }
      main  {
        margin: 50px;
      }
      
  </style>
  <body>
    <!-- header -->
    <header>
      <!-- navbar -->
      <nav class="navbar text-bg-dark p-3">
        <div class="container-fluid" style="height: 100px">
          <img src="../images/Bille Ville.png" width="80px" />
          <form class="d-flex" role="search">
            
            <a class="btn btn-secondary" href="../index.html">HomePage</a>
            <!-- <button class="btn btn-outline-success" type="submit"> -->

            <!-- </button> -->
          </form>
        </div>
      </nav>
    </header>
    <main>
    <div>
    <form id="container">
      <h2>SIGN IN</h2>
      <p>Email Address</p>
      <input type="text" id="email" />
      <p>Password</p>
      <input type="password" id="password" style="display: block;"/>
      <input type="checkbox" onclick="showPass()"></input>Show Password
      <input type="submit" value="SIGN IN" style="display: block;" />
    </form>
  
</div>
    <div>
    <h2>DON'T HAVE AN ACCOUNT?</h2>
    <P>Create an account to check out faster and use our convenient site features</P>
    <a href="signup.html">CREATE AN ACCOUNT</a>
    </div>
  </main>
    <!-- Footer -->
    <footer class="text-center text-white" style="background-color: black">
      <!-- Grid container -->
      <div class="container text-center" style="margin: auto">
        <!-- Section: Links -->
        <section class="mt-5">
          <!-- Grid row-->
          <div class="row text-center d-flex justify-content-center pt-5">
            <!-- Grid column -->
            <div class="col-md-2">
              <h6 class="text-uppercase font-weight-bold">
                <a href="#!" class="text-white">About us</a>
              </h6>
            </div>
            <!-- Grid column -->

            <!-- Grid column -->
            <div class="col-md-2">
              <h6 class="text-uppercase font-weight-bold">
                <a href="#!" class="text-white">Products</a>
              </h6>
            </div>
            <!-- Grid column -->

            <!-- Grid column -->
            <div class="col-md-2">
              <h6 class="text-uppercase font-weight-bold">
                <a href="#!" class="text-white">Awards</a>
              </h6>
            </div>
            <!-- Grid column -->

            <!-- Grid column -->
            <div class="col-md-2">
              <h6 class="text-uppercase font-weight-bold">
                <a href="#!" class="text-white">Help</a>
              </h6>
            </div>
            <!-- Grid column -->

            <!-- Grid column -->
            <div class="col-md-2">
              <h6 class="text-uppercase font-weight-bold">
                <a href="#!" class="text-white">Contact</a>
              </h6>
            </div>
            <!-- Grid column -->
          </div>
          <!-- Grid row-->
        </section>
        <!-- Section: Links -->

        <hr class="my-5" />

        <!-- Section: Text -->
        <section class="mb-5">
          <div class="row d-flex justify-content-center">
            <div class="col-lg-8">
              <p>
                Discover the ultimate online shopping experience with our
                e-commerce website. Shop from the comfort of your own home and
                browse through our vast selection of products from trusted
                brands and sellers. With easy navigation and secure payment
                options, we make online shopping a breeze. Start shopping today
                and experience the convenience of our e-commerce website.
              </p>
            </div>
          </div>
        </section>
        <!-- Section: Text -->

        <!-- Section: Social -->
        <section class="text-center mb-5">
          <a href="" class="text-white me-4">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-google"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-linkedin"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-github"></i>
          </a>
        </section>
        <!-- Section: Social -->
      </div>
      <!-- Grid container -->

      <!-- Copyright -->
      <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
        Â© 2020 Copyright:
        <a class="text-white" href="https://mdbootstrap.com/">BilleVille.com</a>
      </div>
      <!-- Copyright -->
    </footer>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
    crossorigin="anonymous"
  ></script>
  <script>
    //////////////////////to hide or show password////////////////

    const password = document.getElementById("password")
    function showPass(){
       if(password.type=="password"){
        password.type = "text"
       }
       else{
        password.type = "password"
       }
       
    }
    ////////////////////fetch request to log in ///////////////////
    const url = "https://bille-ville-backend.onrender.com/user/login";
    function Login(e, p) {
      (this.email_address = e), (this.password = p);
    }
    const form = document.getElementById("container");
    form.addEventListener("submit", (event) => {
      event.preventDefault();
      const email_address = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      const login = new Login(email_address, password);
      fetch(url, {
        method: "POST",
        headers: {
          "content-type": "application/json",
        },
        body: JSON.stringify(login),
      })
        .then((res) => res.json())
        .then((res) => {
          console.log(res,"success")
          sessionStorage.setItem("key", JSON.stringify(res.token));
          sessionStorage.setItem("userID", JSON.stringify(res.userID));
          alert("Logged in successfully");
          window.location.href = "../index.html";
        })
        .catch((err) => {
          console.log(err.message,"failure")
          alert(err.messsage);
        });
    });
  </script>
</html>
